# Taurus Uploader Script
# This script uses vegadude utility for uploading

set(TAURUS_VEGADUDE_PATH "@TAURUS_VEGADUDE_PATH@")
set(TAURUS_EXEC_NAME "@TAURUS_EXEC_NAME@")
set(TAURUS_TARGET_PATH "@TAURUS_TARGET_PATH@")
set(CMAKE_BINARY_DIR "@CMAKE_BINARY_DIR@")

if(TAURUS_TARGET_PATH STREQUAL "")
    message(FATAL_ERROR "TAURUS_TARGET_PATH required")
endif()

if (TAURUS_VEGADUDE_PATH STREQUAL "")
    set(TAURUS_VEGADUDE_FULL_PATH vegadude)
else()
    set(TAURUS_VEGADUDE_FULL_PATH ${TAURUS_VEGADUDE_PATH}/vegadude)
endif()

set (ARGS --aries -tp ${TAURUS_TARGET_PATH} -bp ${CMAKE_BINARY_DIR}/${TAURUS_EXEC_NAME} -sau)

execute_process(COMMAND
    ${TAURUS_VEGADUDE_FULL_PATH} ${ARGS}
    ECHO_OUTPUT_VARIABLE ECHO_ERROR_VARIABLE COMMAND_ERROR_IS_FATAL ANY)
